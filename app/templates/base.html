<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a2e">
    
    <!-- DNS Prefetch & Preconnect for external resources -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    
    {# SEO Meta Tags - Priority: page-specific > block > fallback #}
    {% set default_title = "Hermitage Frankfurt – Fliesen & Innenausstattung | Frankfurt am Main" %}
    {% set default_description = "Premium Fliesen & Interior Design Showroom in Frankfurt seit 1998. Über 500m² Ausstellung: Naturstein, Feinsteinzeug, Mosaik, Badmöbel. ☎ 069-90475570" %}
    
    <title>{% block title %}{% if page and page.seo_title %}{{ page.seo_title }}{% else %}{{ default_title }}{% endif %}{% endblock %}</title>
    <meta name="description" content="{% block description %}{% if page and page.seo_description %}{{ page.seo_description }}{% else %}{{ default_description }}{% endif %}{% endblock %}">
    <meta name="keywords" content="{% block keywords %}Fliesen Frankfurt, Naturstein Frankfurt, Badezimmer Design, Interior Design Frankfurt, Marmor Fliesen, Feinsteinzeug, Hermitage Frankfurt, Fliesenshowroom{% endblock %}">
    <meta name="author" content="Hermitage Home & Design GmbH & Co KG">
    <meta name="robots" content="index, follow">
    
    {# Canonical URL - always use production domain #}
    {% set base_domain = "https://hermitage-frankfurt.de" %}
    <link rel="canonical" href="{{ base_domain }}{{ request.path }}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:site_name" content="Hermitage Frankfurt">
    <meta property="og:title" content="{% block og_title %}{% if page and page.seo_title %}{{ page.seo_title }}{% else %}Hermitage Frankfurt – Premium Fliesen & Interior Design{% endif %}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{% if page and page.seo_description %}{{ page.seo_description }}{% else %}{{ default_description }}{% endif %}{% endblock %}">
    <meta property="og:url" content="{{ base_domain }}{{ request.path }}">
    <meta property="og:image" content="{% block og_image %}{{ base_domain }}/static/images/og-image.jpg{% endblock %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Hermitage Frankfurt Showroom">
    <meta property="og:locale" content="de_DE">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@HermitageFfm">
    <meta name="twitter:creator" content="@HermitageFfm">
    <meta name="twitter:title" content="{{ self.og_title() }}">
    <meta name="twitter:description" content="{{ self.og_description() }}">
    <meta name="twitter:image" content="{{ self.og_image() }}">
    <meta name="twitter:image:alt" content="Hermitage Frankfurt – Fliesen & Interior Design Showroom">
    
    {# Preload critical resources for LCP #}
    {% block preload %}
    <link rel="preload" href="{{ url_for('static', filename='images/hero/slide-1.jpg') }}" as="image" fetchpriority="high">
    {% endblock %}
    
    <!-- Critical CSS inline for above-the-fold content -->
    <style>{% include 'critical_css.html' %}</style>
    
    <!-- Schema.org JSON-LD для LocalBusiness -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HomeGoodsStore",
        "@id": "https://hermitage-frankfurt.de/#business",
        "name": "Hermitage Frankfurt",
        "alternateName": "Hermitage Home & Design GmbH & Co KG",
        "description": "Premium Fliesen & Interior Design Showroom in Frankfurt am Main seit 1998. Über 1.000 m² Ausstellungsfläche für Fliesen, Naturstein, Badmöbel und Interior Design.",
        "url": "https://hermitage-frankfurt.de",
        "telephone": "+49-69-90475570",
        "email": "info@hermitage-frankfurt.de",
        "foundingDate": "1998",
        "founder": {
            "@type": "Person",
            "name": "Leonid Parhomowski"
        },
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Hanauer Landstraße 421",
            "addressLocality": "Frankfurt am Main",
            "postalCode": "60314",
            "addressRegion": "Hessen",
            "addressCountry": "DE"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": "50.1155",
            "longitude": "8.7372"
        },
        "openingHoursSpecification": [
            {
                "@type": "OpeningHoursSpecification",
                "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                "opens": "10:00",
                "closes": "18:00"
            },
            {
                "@type": "OpeningHoursSpecification",
                "dayOfWeek": "Saturday",
                "opens": "10:00",
                "closes": "14:00"
            }
        ],
        "priceRange": "€€€",
        "paymentAccepted": ["Cash", "Credit Card", "Debit Card", "Bank Transfer"],
        "currenciesAccepted": "EUR",
        "areaServed": {
            "@type": "GeoCircle",
            "geoMidpoint": {
                "@type": "GeoCoordinates",
                "latitude": "50.1155",
                "longitude": "8.7372"
            },
            "geoRadius": "50000"
        },
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Fliesen & Interior Design",
            "itemListElement": [
                {"@type": "Offer", "itemOffered": {"@type": "Product", "name": "Großformat Fliesen"}},
                {"@type": "Offer", "itemOffered": {"@type": "Product", "name": "Naturstein"}},
                {"@type": "Offer", "itemOffered": {"@type": "Product", "name": "Feinsteinzeug"}},
                {"@type": "Offer", "itemOffered": {"@type": "Product", "name": "Mosaik Fliesen"}},
                {"@type": "Offer", "itemOffered": {"@type": "Product", "name": "Badmöbel"}},
                {"@type": "Offer", "itemOffered": {"@type": "Product", "name": "Türen"}},
                {"@type": "Service", "name": "Fliesenverlegung"},
                {"@type": "Service", "name": "Innenausstattung"},
                {"@type": "Service", "name": "Interior Design"},
                {"@type": "Service", "name": "Fliesenberatung"},
                {"@type": "Service", "name": "3D-Planung"}
            ]
        },
        "sameAs": [
            "https://www.instagram.com/hermitage_frankfurt/",
            "https://www.facebook.com/HermitageFrankfurt/"
        ],
        "image": "https://hermitage-frankfurt.de/static/images/showroom.jpg",
        "logo": "https://hermitage-frankfurt.de/static/images/logo.png"
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    
    <!-- Optimized CSS Loading -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"></noscript>
    
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet"></noscript>
    
    <!-- Google Fonts optimized -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"></noscript>
    
    <!-- Custom CSS with media query optimization -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" media="all">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Zum Hauptinhalt springen</a>
    
    <!-- Cookie Banner -->
    {% include 'components/cookie_banner.html' %}
    
    <!-- Navigation -->
    {% include 'components/navbar.html' %}
    
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
    <!-- Main Content -->
    <main id="main-content" role="main">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    {% include 'components/footer.html' %}
    
    <!-- Chatbot Widget -->
    {% include 'components/chatbot.html' %}
    
    <!-- Bootstrap JS (defer for performance) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
    
    <!-- Custom JS (defer for performance) -->
    <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/chatbot.js') }}" defer></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
